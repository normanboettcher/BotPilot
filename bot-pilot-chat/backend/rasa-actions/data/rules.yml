version: "3.1"

rules:
  - rule: Begrüßung antworten
    steps:
      - intent: begruessung
      - action: action_begruessung
  - rule: Verabschiedung antworten
    steps:
      - intent: verabschiedung
      - action: action_verabschiedung
  - rule: default fallback
    condition:
      - active_loop: null
    steps:
      - intent: nlu_fallback
      - action: action_default_fallback
  - rule: Positives Feedback
    steps:
      - intent: positive_feedback
      - action: action_positive_feedback
  - rule: Negatives Feedback
    steps:
      - intent: negative_feedback
      - action: action_negative_feedback
  - rule: FAQ beantworten
    steps:
      - intent: faq
      - action: action_get_faq
  - rule: Allgemeine Bot-Frage
    condition:
      - active_loop: null
    steps:
      - intent: general_bot
      - action: action_general_bot
  - rule: Anreise
    steps:
      - intent: anreise
      - action: action_anreise
  - rule: Bereiche
    steps:
      - intent: bereiche
      - action: action_bereiche
  - rule: Kosten
    steps:
      - intent: kosten
      - action: action_kosten
  - rule: Parking
    steps:
      - intent: parking
      - action: action_parking
  - rule: Standort
    steps:
      - intent: standort
      - action: action_standort
  - rule: Steuerberatung
    steps:
      - intent: steuerberatung
      - action: action_steuerberatung
  - rule: Steuererklärung
    steps:
      - intent: steuererklaerung
      - action: action_steuererklaerung
  - rule: Unterlagen
    steps:
      - intent: unterlagen
      - action: action_unterlagen
  - rule: Zeiten
    steps:
      - intent: zeiten
      - action: action_zeiten

  - rule: Aktivierung Termin-Form
    condition:
      - active_loop: null
    steps:
      - intent: termin_vereinbaren
      - action: termin_form
      - active_loop: termin_form
  - rule: Switch to user_type_form
    condition:
      - active_loop: termin_form
      - slot_was_set:
          - requested_slot: null
    steps:
      - action: termin_form
      - active_loop: null
      - action: action_switch_user_type_form
      - slot_was_set:
          - next_form_name: user_type_form
      - action: user_type_form
      - active_loop: user_type_form

  - rule: ask termin_form continue and affirm
    steps:
      - action: action_ask_continue
      - active_loop: null
      - intent: affirm
      - action: termin_form
      - active_loop: termin_form

  - rule: ask continue and deny
    steps:
      - action: action_ask_continue
      - active_loop: null
      - intent: deny
      - action: action_deny

  - rule: ask continue after stop intent
    steps:
      - intent: stop
      - action: action_stop
      - action: action_ask_continue
      - active_loop: null
