version: "3.1"

rules:
  - rule: Begrüßung antworten
    steps:
      - intent: begruessung
      - action: action_begruessung
  - rule: Verabschiedung antworten
    steps:
      - intent: verabschiedung
      - action: action_verabschiedung
  - rule: default fallback
    condition:
      - active_loop: null
    steps:
      - intent: nlu_fallback
      - action: action_default_fallback
  - rule: Positives Feedback
    steps:
      - intent: positive_feedback
      - action: action_positive_feedback
  - rule: Negatives Feedback
    steps:
      - intent: negative_feedback
      - action: action_negative_feedback
  - rule: FAQ beantworten
    steps:
      - intent: faq
      - action: action_get_faq
  - rule: Allgemeine Bot-Frage
    condition:
      - active_loop: null
    steps:
      - intent: general_bot
      - action: action_general_bot
  - rule: Anreise
    steps:
      - intent: anreise
      - action: action_anreise
  - rule: Bereiche
    steps:
      - intent: bereiche
      - action: action_bereiche
  - rule: Kosten
    steps:
      - intent: kosten
      - action: action_kosten
  - rule: Parking
    steps:
      - intent: parking
      - action: action_parking
  - rule: Standort
    steps:
      - intent: standort
      - action: action_standort
  - rule: Steuerberatung
    steps:
      - intent: steuerberatung
      - action: action_steuerberatung
  - rule: Steuererklärung
    steps:
      - intent: steuererklaerung
      - action: action_steuererklaerung
  - rule: Unterlagen
    steps:
      - intent: unterlagen
      - action: action_unterlagen
  - rule: Zeiten
    steps:
      - intent: zeiten
      - action: action_zeiten

  - rule: Aktivierung Termin-Form
    condition:
      - active_loop: null
    steps:
      - intent: termin_vereinbaren
      - action: termin_form
      - active_loop: termin_form

  - rule: Termin vereinbaren
    condition:
      - active_loop: termin_form
    steps:
      - action: termin_form
      - active_loop: null
      - action: action_termin_vereinbaren

  - rule: ask for continue after three failed medium attempts
    condition:
      - active_loop: termin_form
      - slot_was_set:
          - termin_medium_attempts: 3
    steps:
      - action: action_ask_termin_medium

  - rule: stop from after deny
    condition:
      - slot_was_set:
          - continue_form: deny
    steps:
      - active_loop: null
      - action: action_deny

  - rule: continue termin_form after affirm
    condition:
      - slot_was_set:
          - continue_form: affirm
    steps:
      - action: termin_form
      - active_loop: termin_form