version: '3.1'
intents:
  - affirm
  - anreise
  - begruessung
  - bereiche
  - deny
  - faq
  - general_bot
  - kosten
  - negative_feedback
  - nlu_fallback
  - parking
  - positive_feedback
  - standort
  - steuerberatung
  - steuererklaerung
  - stop
  - termin_infos
  - termin_medium_inform
  - termin_type_inform
  - termin_vereinbaren
  - unterlagen
  - user_type_inform
  - verabschiedung
  - zeiten
  - consultant_inform
  - user_name_inform
  - user_mail_inform
  - meeting_datetime_inform
entities:
  - termin_medium
  - user_type
  - termin_type
  - user_mail
  - person_name
  - meeting_datetime
slots:
  meeting_datetime:
    mappings:
      - type: from_entity
        entity: meeting_datetime
      - type: from_text
        conditions:
          - active_loop: make_meeting_form
            requested_slot: meeting_datetime
    type: text
  user_name_confirmed:
    type: bool
    initial_value: false
    mappings:
      - type: from_intent
        conditions:
          - active_loop: user_info_form
            requested_slot: user_name_confirmed
        intent: affirm
        value: true
      - type: from_intent
        conditions:
          - active_loop: user_info_form
            requested_slot: user_name_confirmed
        intent: deny
        value: false
      - type: custom
        conditions:
          - active_loop: user_info_form
            requested_slot: user_name_confirmed
  next_form_name:
    mappings:
      - type: custom
    type: text
  user_type:
    mappings:
      - type: from_entity
        entity: user_type
        conditions:
          - active_loop: user_type_form
            requested_slot: user_type
      - type: from_text
        conditions:
          - active_loop: user_type_form
            requested_slot: user_type
    type: categorical
    values:
      - privatperson
      - unternehmer
      - freiberufler
      - selbststaendiger
  user_name:
    mappings:
      - type: from_text
        conditions:
          - active_loop: user_info_form
            requested_slot: user_name
      - type: from_entity
        entity: person_name
        conditions:
          - active_loop: user_info_form
            requested_slot: user_name
    type: text
  user_mail:
    mappings:
      - type: from_entity
        entity: user_mail
        conditions:
          - active_loop: user_info_form
            requested_slot: user_mail
      - type: from_text
        conditions:
          - active_loop: user_info_form
            requested_slot: user_mail
    type: text

  termin_type:
    mappings:
      - type: from_entity
        entity: termin_type
        conditions:
          - active_loop: termin_form
            requested_slot: termin_type
      - type: from_text
        conditions:
          - active_loop: termin_form
            requested_slot: termin_type
    type: categorical
    values:
      - erstberatung
      - folgeberatung
      - termin
  termin_medium_attempts:
    type: float
    initial_value: 0
    mappings:
      - type: custom
  termin_medium:
    mappings:
      - type: from_entity
        entity: termin_medium
        conditions:
          - active_loop: termin_form
            requested_slot: termin_medium
      - type: from_text
        conditions:
          - active_loop: termin_form
            requested_slot: termin_medium
    type: categorical
    values:
      - mail
      - phone
      - bot
  consultant_name:
    type: text
    mappings:
      - type: from_entity
        entity: person_name
        conditions:
          - active_loop: consultant_form
            requested_slot: consultant_name
      - type: from_text
        conditions:
          - active_loop: consultant_form
            requested_slot: consultant_name

forms:
  termin_form:
    required_slots:
      - termin_type
      - termin_medium
  user_type_form:
    required_slots:
      - user_type
  user_info_form:
    required_slots:
      - user_name
      - user_name_confirmed
      - user_mail
  consultant_form:
    required_slots:
      - consultant_name
  make_meeting_form:
    required_slots:
      - meeting_datetime
actions:
  - action_submit_termin
  - action_begruessung
  - action_ask_continue
  - action_verabschiedung
  - action_general_bot
  - validate_termin_form
  - action_default_fallback
  - action_get_faq
  - action_positive_feedback
  - action_negative_feedback
  - action_parking
  - action_kosten
  - action_unterlagen
  - action_steuererklaerung
  - action_standort
  - action_anreise
  - action_bereiche
  - action_zeiten
  - action_steuerberatung
  - action_ask_termin_medium
  - action_ask_termin_type
  - action_ask_user_type
  - action_stop
  - validate_user_info_form
  - action_ask_user_name
  - action_ask_user_mail
  - action_switch_form
  - action_ask_consultant
  - action_handle_user_name_confirm
  - action_submit_make_meeting_form
  - action_ask_feedback
  - action_ask_user_name_confirmed

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
